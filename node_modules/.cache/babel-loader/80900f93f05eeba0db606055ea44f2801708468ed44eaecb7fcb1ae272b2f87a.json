{"ast":null,"code":"import _regeneratorRuntime from\"G:/Website/zingmp3/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"G:/Website/zingmp3/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"G:/Website/zingmp3/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{useParams,useLocation}from\"react-router-dom\";import*as apis from\"../../api\";import moment from\"moment\";import{ListSong}from\"../../components\";import{useDispatch,useSelector}from\"react-redux\";import*as actions from\"../../store/actions\";import icons from\"../../ultis/icon\";import{AudioLoad}from\"../../components\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Playlist=function Playlist(){var _playList$song2,_playList$song3;var localtion=useLocation();var PiPlayCircleThin=icons.PiPlayCircleThin;var _useParams=useParams(),pid=_useParams.pid;var dispatch=useDispatch();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),playList=_useState2[0],setplayList=_useState2[1];var _useSelector=useSelector(function(state){return state.music;}),isPlaying=_useSelector.isPlaying;useEffect(function(){dispatch(actions.loading(true));var fetchDataPlayList=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var reponse,_reponse$data,_reponse$data2,_reponse$data2$data,_reponse$data2$data$s;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return apis.apiGetDetailPlayList(pid);case 2:reponse=_context.sent;dispatch(actions.loading(false));if((reponse===null||reponse===void 0?void 0:reponse.data.err)===0){setplayList(reponse===null||reponse===void 0?void 0:(_reponse$data=reponse.data)===null||_reponse$data===void 0?void 0:_reponse$data.data);dispatch(actions.playAlbum(reponse===null||reponse===void 0?void 0:(_reponse$data2=reponse.data)===null||_reponse$data2===void 0?void 0:(_reponse$data2$data=_reponse$data2.data)===null||_reponse$data2$data===void 0?void 0:(_reponse$data2$data$s=_reponse$data2$data.song)===null||_reponse$data2$data$s===void 0?void 0:_reponse$data2$data$s.items));}case 5:case\"end\":return _context.stop();}},_callee);}));return function fetchDataPlayList(){return _ref.apply(this,arguments);};}();fetchDataPlayList();},[pid]);useEffect(function(){var _localtion$state;if(localtion!==null&&localtion!==void 0&&(_localtion$state=localtion.state)!==null&&_localtion$state!==void 0&&_localtion$state.playAblum&&playList){var _playList$song;var indexFirst=playList===null||playList===void 0?void 0:(_playList$song=playList.song)===null||_playList$song===void 0?void 0:_playList$song.items[0];dispatch(actions.setCurSongId(indexFirst===null||indexFirst===void 0?void 0:indexFirst.encodeId));dispatch(actions.isPlay(true));}},[pid,playList]);return/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col overflow-hidden px-14 py-8  \",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-full gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-[30%] flex-none flex gap-3 flex-col  \",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-full overflow-hidden relative group/edit hover:rounded-lg\",children:[/*#__PURE__*/_jsx(\"img\",{src:playList===null||playList===void 0?void 0:playList.thumbnailM,alt:\"thumbnail\",className:\"shadow-sm object-contain rounded-lg  cursor-pointer group-hover/edit:animate-scale-up\"}),/*#__PURE__*/_jsx(\"div\",{className:\" w-full absolute top-0 bottom-0 left-0 right-0 group-hover/edit:bg-bg-layd   group-hover/edit:visible\",children:/*#__PURE__*/_jsx(\"span\",{className:\"flex h-full justify-center items-center text-white\",children:isPlaying?/*#__PURE__*/_jsx(\"span\",{className:\" drop-shadow-lg p-2 rounded-full border border-white\",children:/*#__PURE__*/_jsx(AudioLoad,{})}):/*#__PURE__*/_jsx(PiPlayCircleThin,{size:48})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center  text-main-100 gap-1  text-xs\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-main \",children:playList===null||playList===void 0?void 0:playList.title}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-md\",children:[\"C\\u1EADp nh\\u1EADt :\",/*#__PURE__*/_jsx(\"span\",{className:\"pl-1\",children:moment(playList===null||playList===void 0?void 0:playList.contentLastUpdate).format(\"DD/MM/YYYY\")})]}),/*#__PURE__*/_jsx(\"span\",{children:playList===null||playList===void 0?void 0:playList.artistsNames}),/*#__PURE__*/_jsx(\"span\",{children:\"\".concat(Math.round((playList===null||playList===void 0?void 0:playList.like)/1000),\"K ng\\u01B0\\u1EDDi y\\xEAu th\\xEDch\")})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-auto \",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-main-100\",children:\"L\\u1EDDi t\\u1EF1a \"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-main\",children:playList===null||playList===void 0?void 0:playList.sortDescription})]}),/*#__PURE__*/_jsx(ListSong,{songs:playList===null||playList===void 0?void 0:(_playList$song2=playList.song)===null||_playList$song2===void 0?void 0:_playList$song2.items,totalDuration:playList===null||playList===void 0?void 0:(_playList$song3=playList.song)===null||_playList$song3===void 0?void 0:_playList$song3.totalDuration})]})]})});};export default Playlist;","map":{"version":3,"names":["React","useEffect","useState","useParams","useLocation","apis","moment","ListSong","useDispatch","useSelector","actions","icons","AudioLoad","jsx","_jsx","jsxs","_jsxs","Playlist","_playList$song2","_playList$song3","localtion","PiPlayCircleThin","_useParams","pid","dispatch","_useState","_useState2","_slicedToArray","playList","setplayList","_useSelector","state","music","isPlaying","loading","fetchDataPlayList","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","reponse","_reponse$data","_reponse$data2","_reponse$data2$data","_reponse$data2$data$s","wrap","_callee$","_context","prev","next","apiGetDetailPlayList","sent","data","err","playAlbum","song","items","stop","apply","arguments","_localtion$state","playAblum","_playList$song","indexFirst","setCurSongId","encodeId","isPlay","className","children","src","thumbnailM","alt","size","title","contentLastUpdate","format","artistsNames","concat","Math","round","like","sortDescription","songs","totalDuration"],"sources":["G:/Website/zingmp3/src/containers/public/Playlist.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useParams, useLocation } from \"react-router-dom\";\r\nimport * as apis from \"../../api\";\r\nimport moment from \"moment\";\r\nimport { ListSong } from \"../../components\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport * as actions from \"../../store/actions\";\r\nimport icons from \"../../ultis/icon\";\r\nimport { AudioLoad } from \"../../components\";\r\n  \r\nconst Playlist = () => {\r\n  const localtion = useLocation()\r\n  const { PiPlayCircleThin } = icons;\r\n  const { pid } = useParams();\r\n  const dispatch = useDispatch();\r\n  const [playList, setplayList] = useState({});\r\n  const { isPlaying } = useSelector((state) => state.music);\r\n  useEffect(() => {\r\n    dispatch(actions.loading(true))\r\n    const fetchDataPlayList = async () => {\r\n      const reponse = await apis.apiGetDetailPlayList(pid);\r\n      dispatch(actions.loading(false))\r\n      if (reponse?.data.err === 0) {\r\n        setplayList(reponse?.data?.data);\r\n        dispatch(actions.playAlbum(reponse?.data?.data?.song?.items));\r\n      }\r\n    };\r\n\r\n    fetchDataPlayList();\r\n  }, [pid]);\r\n\r\n  useEffect(() => {\r\n      if(localtion?.state?.playAblum && playList) {\r\n        const indexFirst = playList?.song?.items[0]\r\n        dispatch(actions.setCurSongId(indexFirst?.encodeId))\r\n        dispatch(actions.isPlay(true))\r\n      }\r\n  }, [pid, playList]);\r\n\r\n\r\n  return (\r\n    <div className=\"flex flex-col overflow-hidden px-14 py-8  \">\r\n      <div className=\"flex w-full gap-6\">\r\n        <div className=\"w-[30%] flex-none flex gap-3 flex-col  \">\r\n          <div className=\"w-full overflow-hidden relative group/edit hover:rounded-lg\">\r\n            <img\r\n              src={playList?.thumbnailM}\r\n              alt=\"thumbnail\"\r\n              className=\"shadow-sm object-contain rounded-lg  cursor-pointer group-hover/edit:animate-scale-up\"\r\n            />\r\n            <div className=\" w-full absolute top-0 bottom-0 left-0 right-0 group-hover/edit:bg-bg-layd   group-hover/edit:visible\">\r\n              <span className=\"flex h-full justify-center items-center text-white\">\r\n                {isPlaying ? <span className=\" drop-shadow-lg p-2 rounded-full border border-white\"><AudioLoad/></span> : <PiPlayCircleThin  size={48}/>}\r\n              </span>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex flex-col items-center  text-main-100 gap-1  text-xs\">\r\n            <h3 className=\"text-xl font-bold text-main \">{playList?.title}</h3>\r\n            <span className=\"text-md\">\r\n              Cập nhật :\r\n              <span className=\"pl-1\">\r\n                {moment(playList?.contentLastUpdate).format(\"DD/MM/YYYY\")}\r\n              </span>\r\n            </span>\r\n            <span>{playList?.artistsNames}</span>\r\n            <span>{`${Math.round(\r\n              playList?.like / 1000\r\n            )}K người yêu thích`}</span>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex-auto \">\r\n          <div className=\"text-sm\">\r\n            <span className=\"text-main-100\">Lời tựa </span>\r\n            <span className=\"text-main\">{playList?.sortDescription}</span>\r\n          </div>\r\n          <ListSong\r\n            songs={playList?.song?.items}\r\n            totalDuration={playList?.song?.totalDuration}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Playlist;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}